<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>HOME ASSIST</title>
    <meta name="description" content="GARO template">
    <meta name="author" content="">
    <meta name="keyword" content="html5, css, bootstrap, property, real-estate theme , bootstrap template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800' rel='stylesheet' type='text/css'>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/fontello.css">
    <link href="assets/fonts/icon-7-stroke/css/pe-icon-7-stroke.css" rel="stylesheet">
    <link href="assets/fonts/icon-7-stroke/css/helper.css" rel="stylesheet">
    <link href="assets/css/animate.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="assets/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/icheck.min_all.css">
    <link rel="stylesheet" href="assets/css/price-range.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/owl.theme.css">
    <link rel="stylesheet" href="assets/css/owl.transitions.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
</head>

<body>

    <div id="preloader">
        <div id="status">&nbsp;</div>
    </div>
    <!-- Body content -->

    <div class="header-connect">
        <div class="container">
            <div class="row">
                <div class="col-md-5 col-sm-8  col-xs-12">
                    <div class="header-half header-call">
                        <p>
                            <span><i class="pe-7s-call"></i> + 57 300 1234567</span>
                            <span><i class="pe-7s-mail"></i> info@home-assist.com</span>
                        </p>
                    </div>
                </div>

                <div class="col-md-2 col-md-offset-5  col-sm-3 col-sm-offset-1  col-xs-12">
                    <div class="header-half header-social">
                        <ul class="list-inline">
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!--End top header -->

    <nav class="navbar navbar-default ">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html"><img src="assets/img/logo.png" alt=""></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse yamm" id="navigation">
                <div class="button navbar-right">
                    <a class="navbar-btn nav-button wow bounceInRight login" href="registro.html"
                        data-wow-delay="0.45s">Login</a>
                    <a class="navbar-btn nav-button wow fadeInRight" href="solicitar.html"
                        data-wow-delay="0.48s">Solicitar</a>
                </div>
                <ul class="main-nav nav navbar-nav navbar-right">
                    <li class="wow fadeInDown" data-wow-delay="0.2s"><a class="" href="index.html">HOME</a></li>
                    <li class="wow fadeInDown" data-wow-delay="0.5s"><a href="contacto.html">Contacto</a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <!-- End of nav bar -->

    <div class="page-head">
        <div class="container">
            <div class="row">
                <div class="page-head-content">
                    <h1 class="page-title">Registro / Login </h1>
                </div>
            </div>
        </div>
    </div>
    <!-- End page header -->


    <!-- register-area -->
    <div class="register-area" style="background-color: rgb(249, 249, 249);">
        <div class="container">

            <div class="col-md-6">
                <div class="box-for overflow">
                    <div class="col-md-12 col-xs-12 register-blocks">
                        <h2>Registrarse : </h2>
                        <form>
                            <div class="form-group">
                                <label for="name">Nombre</label>
                                <input type="text" class="form-control" name="nombre" id="nombre_registro">
                            </div>
                            <div class="form-group">
                                <label for="apellido">Apellido</label>
                                <input type="text" class="form-control" name="apellido" id="apellido_registro">
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="text" class="form-control" name="email" id="email_registro">
                            </div>
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" class="form-control" name="password" id="password_registro">
                            </div>
                            <div class="form-group">
                                <label for="tipo">Quiero Ser</label>
                                <input type="radio" class="form-control" name="tipo" id="cliente" value="cliente">
                                Cliente
                                <input type="radio" class="form-control" name="tipo" id="asistente" value="asistente">
                                Asistente
                            </div>
                            <div class="text-center">
                                <button class="btn btn-default" id="registrar">Registrarse</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="box-for overflow">
                    <div class="col-md-12 col-xs-12 login-blocks">
                        <h2>Ingresar : </h2>
                        <form action="" method="post">
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="text" class="form-control" name="email" id="email_login">
                            </div>
                            <div class="form-group">
                                <label for="password">Contrase√±a</label>
                                <input type="password" class="form-control" name="password" id="password_login">
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-default" id="ingresar"> Ingresar</button>
                                <p><a class="text-left" href="cambiar-clave.html">Olvido su clave</a> </p>
                            </div>
                        </form>
                        <br>

                        <h2>Social login : </h2>

                        <p>
                            <a class="login-social" id="login_social"><i class="fa fa-google-plus"></i>&nbsp;Gmail</a>
                        </p>


                    </div>

                </div>
            </div>

        </div>
    </div>


    <!-- Footer area-->
    <div class="footer-area">

        <div class=" footer">
            <div class="container">
                <div class="row">

                    <div class="col-md-4 col-sm-6 wow fadeInRight animated">
                        <div class="single-footer">
                            <h4>Contacto</h4>
                            <div class="footer-title-line"></div>

                            <img src="assets/img/footer-logo.png" alt="" class="wow pulse" data-wow-delay="1s">
                            <p>Ante cualquier inquietud contacta con nosotros.</p>
                            <ul class="footer-adress">
                                <li><i class="pe-7s-map-marker strong"> </i> Calle 1 # 2 - 3 Colombia</li>
                                <li><i class="pe-7s-mail strong"> </i> info@assist-home.com</li>
                                <li><i class="pe-7s-call strong"> </i> +57 300 1234567</li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-6 wow fadeInRight animated">
                        <div class="single-footer">
                            <h4>Nosotros</h4>
                            <div class="footer-title-line"></div>
                            <ul class="footer-menu">
                                <li><a href="registro.html">Registro</a> </li>
                                <li><a href="contacto.html">Contacto</a></li>
                                <li><a href="#">T√©rminos y Condiciones </a> </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-6 wow fadeInRight animated">
                        <div class="single-footer news-letter">
                            <h4>HOME ASSIST</h4>
                            <div class="footer-title-line"></div>
                            <p>Somos una plataforma que conecta a los clientes los asistentes para las labores del
                                hogar.</p>



                            <div class="social pull-right">
                                <ul>
                                    <li><a class="wow fadeInUp animated" href="#" data-wow-delay="0.2s"><i
                                                class="fa fa-facebook"></i></a></li>
                                    <li><a class="wow fadeInUp animated" href="#" data-wow-delay="0.4s"><i
                                                class="fa fa-instagram"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="footer-copy text-center">
            <div class="container">
                <div class="row">
                    <div class="pull-left">
                        <span> (C) <a href="http://www.KimaroTec.com">KimaroTheme</a> , Todos los derechos reservados
                            2021 </span>
                    </div>
                    <div class="bottom-menu pull-right">
                        <ul>
                            <li><a class="wow fadeInUp animated" href="index.html" data-wow-delay="0.2s">Home</a></li>
                            <li><a class="wow fadeInUp animated" href="contacto.html" data-wow-delay="0.6s">Contacto</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="assets/js/modernizr-2.6.2.min.js"></script>

    <script src="assets/js/jquery-1.10.2.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bootstrap-select.min.js"></script>
    <script src="assets/js/bootstrap-hover-dropdown.js"></script>

    <script src="assets/js/easypiechart.min.js"></script>
    <script src="assets/js/jquery.easypiechart.min.js"></script>

    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/wow.js"></script>

    <script src="assets/js/icheck.min.js"></script>
    <script src="assets/js/price-range.js"></script>

    <script src="assets/js/main.js"></script>

    <!-- firebase -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js";
        //signInWithRedirect, signInWithPopup, GoogleAuthProvider,getRedirectResult,
        import { getAuth, signInWithRedirect, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, browserSessionPersistence } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, doc, getDoc, setDoc, updateDoc, deleteDoc, deleteField } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
        // TODO: Add SDKs for Firebase products that you want to use 
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyA67Ilzh7M7u8EJYXkq020mTD81zLee-as",
            authDomain: "homeassist-daad6.firebaseapp.com",
            projectId: "homeassist-daad6",
            storageBucket: "homeassist-daad6.appspot.com",
            messagingSenderId: "584495830199",
            appId: "1:584495830199:web:618b9854ccabf0efe86932",
            measurementId: "G-PHDFS3XH9T"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider(app);
        const db = getFirestore(app);

        async function CrearDocumento(nombre, apellido, email, cliente, asistente) {

            var ref = collection(db, "usuario");
            const docRef = await addDoc(
                ref, {
                nombre: nombre,
                apellido: apellido,
                email: email,
                cliente: cliente,
                asistente: asistente
                }
            )
                .then(() => {
                    alert("El usuario fue creado correctamente")
                })
                .catch((error) => {
                    alert("Se genero un error en la creacion del usuario, por favor intente mas tarde")
                })
        }

        // registro con correo
        document.getElementById("registrar").addEventListener('click', function (e) {
            e.preventDefault()
            //crear usuario
            const nombre = document.getElementById("nombre_registro").value;
            const apellido = document.getElementById("apellido_registro").value;
            const email = document.getElementById("email_registro").value;
            const password = document.getElementById("password_registro").value;
            const cliente = document.getElementById("cliente").checked;
            const asistente = document.getElementById("asistente").checked;


            let numeroCaracteres = password.length;
            if (numeroCaracteres >= 8) {

                createUserWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        // Signed in
                        const user = userCredential.user;
                        // ...
                        CrearDocumento(nombre, apellido, email, cliente, asistente)

                    })
                    .catch((error) => {
                        const errorCode = error.code;
                        const errorMessage = error.message;
                        // ..
                        console.log(errorCode + " " + errorMessage)
                    });
            } else {
                alert("la contrase√±a debe tener minimo 8 caracteres")
            }

        })
        // fin registro correo

        //login correo
        document.getElementById("ingresar").addEventListener('click', function (e) {
            e.preventDefault()

            const email = document.getElementById("email_login").value;
            const password = document.getElementById("password_login").value;


            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in
                    const user = userCredential.user;
                    console.log(user)
                    // ...
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.log(errorCode + " " + errorMessage)
                });
        })
        // login gmail


        document.getElementById("login_social").addEventListener('click', function (e) {
            e.preventDefault()
            signInWithPopup(auth, provider)
                .then((result) => {
                    // This gives you a Google Access Token. You can use it to access the Google API.
                    const credential = GoogleAuthProvider.credentialFromResult(result);
                    const token = credential.accessToken;
                    // The signed-in user info.
                    const user = result.user;
                    console.log(result)
                    // ...
                }).catch((error) => {
                    // Handle Errors here.
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    // The email of the user's account used.
                    const email = error.email;
                    // The AuthCredential type that was used.
                    const credential = GoogleAuthProvider.credentialFromError(error);
                    // ...
                    console.log(error)
                });

        })
        //fin login gmail

        //persistencia de sesion
        setPersistence(auth, browserSessionPersistence)
            .then(() => {
                // Existing and future Auth states are now persisted in the current
                // session only. Closing the window would clear any existing state even
                // if a user forgets to sign out.
                // ...
                // New sign-in will be persisted with session persistence.
                return signInWithEmailAndPassword(auth, email, password);
            })
            .catch((error) => {
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
            });



    </script>
</body>

</html>